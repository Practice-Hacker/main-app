language: ruby
rbenv:
- 2.5.3
addons:
  postgresql: 9.6
before_script:
  - psql -c 'create database main_app_test;' -U postgres
script:
  - bundle exec rails db:{drop,create,migrate,seed} RAILS_ENV=test
  - bundle exec rspec
running: rspec
deploy:
  provider: heroku
  api_key:
    secure:
  app: main-app
  on:
    repo: Practice-Hacker/main-app
  skip_cleanup: 'true'
email_notifications: false
