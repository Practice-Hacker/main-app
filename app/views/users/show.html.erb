<%= render partial: "/partials/navbar" %>

<%= link_to "Edit Profile", edit_user_path, method: :get %>

<h1>Welcome <%= current_user.username %></h1>

<section class="user-roles">

</section>

<section class="about-me">

</section>

<% if current_user.skills.size > 0 %>
<section class="my-skills">
  <h3>My Skills:</h3>
  <ul>
    <% current_user.skills.each do |user_skill| %>
    <li><%= user_skill.skill %></li>
    <% end %>
  </ul>
</section>
<% else %>
 <section class='my-skills'>
  <p>You have not added any skills</p>
 </section>
<% end %>
<section class="pieces-contributed-to">
  <tr class="total-tips">Overall number of tips contributed: <%= current_user.tips.size %></tr>
  <% current_user.tipped_pieces.distinct.each do |tipped_piece| %>
    <section id="contribution-<%= tipped_piece.id %>"
      <p class="title">
        <%= link_to tipped_piece.title, piece_show_path(tipped_piece.api_work_id) %>
        <% if tipped_piece.subtitle.present? %>
          <%= ": #{tipped_piece.subtitle}"  %>
        <% end %>
      </p>
      <p class="composer">
        Composed by: <%= tipped_piece.composer %>
      </p>
      <p>
        Number of tips you've contributed to this piece:
        <%= current_user.tips.where(piece_id: tipped_piece.id).count %>
      </p>
    </section>
  <% end %>
</section>
